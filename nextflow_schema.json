{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/angelovangel/nxf-alignment/master/nextflow_schema.json",
  "title": "angelovangel/nxf-alignment",
  "workflow_title": "NXF-ALIGNMENT workflow",
  "description": "Basecall, align, and analyze ONT data",
  "url": "https://github.com/angelovangel/nxf-alignment",
  "type": "object",
  "definitions": {
    "input_output_options": {
      "title": "Input/output options",
      "type": "object",
      "fa_icon": "fas fa-angle-double-right",
      "description": "Define where the pipeline should find input data and save output data.",
      "properties": {
        "pod5": {
          "type": "string",
          "format": "directory-path",
          "fa_icon": "fas fa-folder-open",
          "description": "Directory with POD5 files (use when basecalling)",
          "help_text": "Path to directory containing POD5 files for basecalling. Required when starting from raw data."
        },
        "reads": {
          "type": "string",
          "format": "path",
          "fa_icon": "fas fa-file",
          "description": "BAM/FASTQ file or directory of reads (skips basecalling)",
          "help_text": "Path to a single BAM/FASTQ file or directory containing multiple read files. If provided, basecalling will be skipped."
        },
        "ref": {
          "type": "string",
          "format": "file-path",
          "fa_icon": "fas fa-dna",
          "description": "Reference FASTA file",
          "help_text": "Path to reference FASTA file for alignment. Required unless using -entry basecall."
        },
        "asfile": {
          "type": "string",
          "format": "file-path",
          "fa_icon": "fas fa-filter",
          "description": "Adaptive sampling CSV file",
          "help_text": "CSV file from adaptive sampling that filters which reads to basecall."
        },
        "bed": {
          "type": "string",
          "format": "file-path",
          "fa_icon": "fas fa-map",
          "description": "BED file with regions",
          "help_text": "BED file defining regions of interest. If omitted, will be auto-generated from the reference file."
        },
        "outdir": {
          "type": "string",
          "format": "directory-path",
          "description": "The output directory where the results will be saved",
          "fa_icon": "fas fa-poll",
          "default": "output"
        }
      }
    },
    "processing_options": {
      "title": "Processing options",
      "type": "object",
      "fa_icon": "fas fa-cogs",
      "description": "Options for processing and basecalling.",
      "properties": {
        "model": {
          "type": "string",
          "description": "Dorado basecalling model",
          "fa_icon": "fas fa-microchip",
          "default": "fast",
          "help_text": "Name of the Dorado model to use for basecalling. Default is 'fast'. For modifications, use for example 'hac,5mCG_5hmCG'"
        },
        "kit": {
          "type": "string",
          "description": "Barcoding kit name",
          "fa_icon": "fas fa-barcode",
          "help_text": "Name of the barcoding kit used. Required when run is barcoded."
        },
        "samplesheet": {
          "type": "string",
          "format": "file-path",
          "fa_icon": "fas fa-vials",
          "mimetype": "text/csv",
          "description": "CSV file with sample and barcode information",
          "help_text": "Samplesheet must contain columns 'sample' and 'barcode'. Required when run is barcoded."
        }
      }
    },
    "advanced_options": {
      "title": "Advanced options",
      "type": "object",
      "fa_icon": "fas fa-sliders-h",
      "description": "Less common options for the pipeline.",
      "properties": {
        "help": {
          "type": "boolean",
          "description": "Display help text",
          "fa_icon": "fas fa-question-circle"
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/input_output_options"
    },
    {
      "$ref": "#/definitions/processing_options"
    },
    {
      "$ref": "#/definitions/advanced_options"
    }
  ]
}