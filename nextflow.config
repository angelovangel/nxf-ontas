manifest {
    name            = 'angelovangel/nxf-alignment'
    author          = 'aangeloo@gmail.com'
    homePage        = 'https://github.com/angelovangel/nxf-alignment'
    defaultBranch   = 'main'
    description     = 'A Nextflow workflow for basecalling, aligning, and analyzing long-read sequencing data (ONT)'
    mainScript      = 'main.nf'
    nextflowVersion = '>=23.04'
    version         = 'v0.1.0'
}


params {

    outdir = 'results'
    model = 'fast'
    help = ""
    
    // 
    bed = null
    reads = null // Parameter for reads when basecalling is skipped
    

    // if adaptive sampling file is set then dorado basecalls only these reads
    asfile = null

    // barcoded case
    kit = null
    samplesheet = null //csv with columns minimum sample,barcode
}

profiles {
    standard {
        docker.enabled = true
        docker.runOptions = '-u $(id -u):$(id -g)'
    }
    
    test {
        docker.enabled = true
        docker.runOptions = '-u $(id -u):$(id -g)'
        
        params.pod5 = "${projectDir}/data/pod5"
        params.asfile = "${projectDir}/data/as_decisions.csv"
        params.model = "fast"

        params.ref = "${projectDir}/data/ref.fasta"
        params.bed = "${projectDir}/data/regions.bed"
    }
}

process {
    withName: 'DORADO_BASECALL|DORADO_BASECALL_BARCODING' {
        docker.runOptions = '-u $(id -u):$(id -g) --gpus all'
    }
}